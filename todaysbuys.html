<html>

<head>

	<!-- Update the title to your name or the name of your business -->
	<title>Toetrekker trading bot</title>
	<meta charset="UTF-8">
	<!-- Make the site responsive-friendly -->
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Include Font Awesome for icons -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">

	<!-- Include Montserrat font from Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:200,300,400,700" rel="stylesheet">

	<link rel="icon" href="images/robot-emoji.png">

<!-- 	<link rel="stylesheet" href="css/overviewstyle.css">
 -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

	<script>
	<!--
	function getStylesheet() {
		var currentMinutes = new Date().getMinutes();
		var currentHours = new Date().getHours();

		currentTime = currentMinutes + (currentHours*60);

	    if (currentTime < 510 || currentTime > 900) {
	    	console.log("CLOSED");
	       	document.write("<link rel='stylesheet' href='css/indexclosedstyle.css'>");
	    } else {
	    	console.log("OPEN");
	    	document.write("<link rel='stylesheet' href='css/indexopenstyle.css'>");
      	}
	}

	getStylesheet();

	var stock_buys = new Array();
	-->
	</script>

	<noscript><link href="css/indexopenstyle.css" rel="stylesheet"></noscript>

</head>

<body>
	<header class="site-header">
		<div class="site-header-main">
			<div class="site-branding">
				<h1 class="site-title">stock algorithm v6.7</h1>
				<div class="site-description">an automated Robinhood system</div>
			</div>
			<nav class="site-navigation">
				<ul>
					<!-- Optional: Add a class of current-item to a navigation link to indicate which page you're currently viewing -->
					<!-- Use # links to create a single-page site -->
					<!-- Or create multiple pages and link to them separately here -->
					<li><a href="index.html">performance</a></li>
					<li><a href="todaysbuys.html" class="current-item">todays buys</a></li>
					<li><a href="history.html">history</a></li>
					<li><a href="about.html">about</a></li>
				</ul>
			</nav>
		</div>
	</header>

	<div class="fullwidthcontainer" id="buys">

		<script>
		<!--
			n =  new Date();
			n.setDate(n.getDate() - 0);
			y = n.getFullYear();
			m = n.getMonth() + 1;
			d = n.getDate();
	    	document.write("<h1 class='container-title'>" + m + "/" + d + "/" + y + " ranked buys (updates at 2:48pm CST)</h1>");

			var counter = 0
			function waitFor(condition, callback) {
          		counter++;
			    if(!condition()) {
			        console.log('waiting');
			        window.setTimeout(waitFor.bind(null, condition, callback), 100); /* this checks the flag every 100 milliseconds*/
			    } else {
			        console.log('done');
			        callback();
			    }
			}

			function readFiles()
			{
				console.log("oh yea1h")
				$.get('./passedcompanies.txt', function(data) {
				    stock_buys = data.split("\n");
				}, "text");
			}
			readFiles();

			waitFor(() => counter > 15 || stock_buys.length > 0, () => {
			   	console.log(stock_buys[stock_buys.length - 1]);
			   	if (stock_buys[stock_buys.length - 1] == '')
			   	{
			   		stock_buys = stock_buys.slice(0,stock_buys.length - 1);;
			   	}
		    	var i;
		    	console.log(currentTime);
		    	if (currentTime > 0) {
					for (i = 0; i < stock_buys.length; i++) {
						var temp_string = '';
						temp_string = temp_string.concat("<div class='containerExplanationWrapper'>\n", "<div class='logoName'>" + stock_buys[i] + "\n",
										"</div>\n", "<div class='explanationText'>\n", "rank #" + i, "</div>\n", "</div>");

						document.getElementById('buys').innerHTML = document.getElementById('buys').innerHTML.concat(temp_string);
					}
				}
			});
		-->
		</script>
		

	</div>	

</body>

</html>
