<html>

<head>

	<!-- Update the title to your name or the name of your business -->
	<title>Toetrekker trading bot</title>
	<meta charset="UTF-8">
	<!-- Make the site responsive-friendly -->
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Include Font Awesome for icons -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">

	<!-- Include Montserrat font from Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:200,300,400,700" rel="stylesheet">

	<link rel="icon" href="images/robot-emoji.png">

	<!-- <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"> -->


<!-- 	<link rel="stylesheet" href="css/overviewstyle.css">
 -->
	<script>
	<!--
	var loaded = false;
	function getStylesheet() {
		var currentMinutes = new Date().getMinutes();
		var currentHours = new Date().getHours();

		currentTime = currentMinutes + (currentHours*60);

	    if (currentTime < 510 || currentTime > 900) {
	    	console.log("CLOSED");
	       	document.write("<link rel='stylesheet' href='css/indexclosedstyle.css'>");
	    } else {
	    	console.log("OPEN");
	    	document.write("<link rel='stylesheet' href='css/indexopenstyle.css'>");
      	}
	}

	getStylesheet();
    var stock_holds = new Array();
    var week_performance = new Array();

    var counter = 0
    function waitFor(condition, callback) {
        counter++;
        if(!condition()) {
            console.log('waiting');
            window.setTimeout(waitFor.bind(null, condition, callback), 100); /* this checks the flag every 100 milliseconds*/
        } else {
            console.log('done');
            callback();
        }
    }
	-->
	</script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    
	<noscript><link href="css/indexopenstyle.css" rel="stylesheet"></noscript>

</head>

<body>

	<header class="site-header">
		<div class="site-header-main">
			<div class="site-branding">
				<h1 class="site-title">stock algorithm v6.7</h1>
				<div class="site-description">an automated Robinhood system</div>
			</div>
			<nav class="site-navigation">
				<ul>
					<!-- Optional: Add a class of current-item to a navigation link to indicate which page you're currently viewing -->
					<!-- Use # links to create a single-page site -->
					<!-- Or create multiple pages and link to them separately here -->
					<li><a href="index.html" class="current-item">performance</a></li>
					<li><a href="todaysbuys.html">todays buys</a></li>
					<li><a href="history.html">history</a></li>
					<li><a href="about.html">about</a></li>
				</ul>
			</nav>
		</div>
	</header>

	<div class="leftbigcontainer">
		<h1 class="page-title">portfolio value</h1>
        <h1 class="page-title" id="stock_equity">$</h1>

		<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  		<div id="chart_div" style="margin-top: -1vh;"></div>
  		<script>
        function readFiles()
        {
            $.get('./current_holds.txt', function(data) {
                var temp = data.split("\n");
                for (i in temp) {
                    stock_holds = stock_holds.concat(temp[i].split(" "));
                }
            }, "text");
            $.get('./week.txt', function(data) {
                week_performance = data.split("\n");
            }, "text");
        }
        readFiles();

  			google.charts.load('current', {packages: ['corechart', 'line']});
			google.charts.setOnLoadCallback(drawCurveTypes);

			function drawCurveTypes() {
                var data = new google.visualization.DataTable();
                data.addColumn('number', 'X');
                data.addColumn('number', '$');

                waitFor(() => counter > 15 || week_performance.length != [], () => {
                    console.log(week_performance);
                    rows = new Array(parseInt(week_performance.length));
                    for (i in week_performance) {
                        rows[parseInt(i)] = [parseInt(i), parseFloat(week_performance[i])];
                    }

                    document.getElementById('stock_equity').innerHTML = document.getElementById('stock_equity').innerHTML.concat(week_performance[week_performance.length - 1]);

                    data.addRows(rows);

                    var options = {
                    hAxis: {
                      title: 'Time'
                    },
                    // vAxis: {
                    //   title: 'Popularity'
                    // },
                    series: {
                      1: {curveType: 'function'}
                    },
                    height: 350,
                    // width: 400
                    };

                    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
                    chart.draw(data, options);
                });
		    }
  		</script>
        <div class="btn-group-container">
      		<div class="btn-group">
                <div class="dropdown">
                    <button onclick="location.href='overview.html';">1 day</button>
                </div>
    			<div class="dropdown">
    				<button onclick="location.href='overview.html';">1 week</button>
    			</div>
    			<div class="dropdown">
    				<button onclick="location.href='history.html';">1 month</button>
    			</div>
    			<div class="dropdown">
    				<button onclick="location.href='interviews.html';">3 months</button>
    			</div>
    			<div class="dropdown">
    				<button onclick="location.href='interviews.html';">1 year</button>
    			</div>
    			<div class="dropdown">
    				<button onclick="location.href='interviews.html';">all time</button>
    			</div>
    		</div>
        </div>

	</div>	

	<div class="rightsmallcontainer" id="holds">
		<h1 class="page-title" style="margin-bottom: 1vh">current holds</h1>
		<script>
		<!--
			waitFor(() => counter > 15 || stock_holds.length != [], () => {
				console.log("omg");
				console.log(stock_holds.length % 2);

        if (stock_holds.length % 2 == 1 && stock_holds.length >= 1)
        {
          console.log('yis');
          stock_holds = stock_holds.slice(0,stock_holds.length - 1);
        }

				var i;
				// var temp_string = '';
				for (i = 0; i < stock_holds.length / 2; i++) {
          // window.setTimeout(() => {
            var temp_string = '';
            temp_string = temp_string.concat("<div class='explanationWrapper'>\n", "<div class='logoName'>" + stock_holds[2*i] + "\n", 
            "</div>\n", "<div class='explanationText'>\n", stock_holds[(2*i) + 1] + " units\n", "</div>\n", "</div>\n");

            document.getElementById('holds').innerHTML = document.getElementById('holds').innerHTML.concat(temp_string);
          // }, 1000)
					
				}
				// console.log(temp_string);
			});

			

		-->
		</script>

		<!-- </div>
		<div class="explanationWrapper">
		</div>
		<div class="explanationWrapper">
		</div>
		<div class="explanationWrapper">
		</div>
		<div class="explanationWrapper">
		</div> -->
	</div>

</body>

</html>
